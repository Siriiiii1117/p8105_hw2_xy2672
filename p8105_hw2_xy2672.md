p8105_hw2_xy2672
================
Xirui Yang
2025-10-02

## Problem 1

Read the `pols_month` datafile and clean:

``` r
pols_month_df = 
  read_csv("data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) |> 
  mutate(
    month = month.name[as.numeric(month)],
    president = 
      case_match(
        prez_gop,
        1 ~ "gop",
        0 ~ "dem"
      ),
    president = as.factor(president)
  ) |> 
  select(-prez_gop, -prez_dem, -day)
```

The `pols_month_df` dataset contains the number of senators, governors
and representatives on a specific `year-month` date. The `president`
variable of this dataset indicates whether the president was Republican
or Democratic. There are 822 observations and 9 variables. The range of
the `year` variable is (1947, 2015).

Read the `snp` datafile and clean:

``` r
snp_df = 
  read_csv("data/snp.csv") |> 
  janitor::clean_names() |> 
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) |> 
  mutate(
    year = if_else(year <= 15, 2000 + year, 1900 + year), # the year range is between 1950 to 2015
    month = month.name[as.numeric(month)]) |> 
  arrange(year, month) |> 
  relocate(year, month) |> 
  select(-day)
```

The `snp_df` dataset contains closing values of the S&P stock index on a
specific `year-month` date. The `close` variable indicates the closing
value. There are 787 observations and 3 variables. The range of the
`year` variable is (1950, 2015).

Read the `unemployment` datafile and tidy it:

``` r
unemployment_df = 
  read_csv("data/unemployment.csv") |>
  pivot_longer(
    cols = -Year,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    Year = as.numeric(Year),
    month = factor(month, levels = month.abb, labels = month.name) # convert abbreviations to full name
  ) |> 
  janitor::clean_names()
```

The `unemployment_df` dataset contains the percentage of unemployment on
a specific `year-month` date. The `unemployment` variable indicates the
percentage of unemployment. There are 816 observations and 3 variables.
The range of the `year` variable is (1948, 2015).

Now joining the dataframe:

``` r
pols_snp_unemployment = pols_month_df |> 
  left_join(snp_df, by = c("year", "month")) |> 
  left_join(unemployment_df, by = c("year", "month"))
```

The `pols_snp_unemployment` dataset merge the three datasets above:
`pols_month_df`, `snp_df`, `unemployment_df`. The dataset range of the
`year` variable remains to be (1947, 2015). This dataset gives
information about the unemployment percentage and the closing values of
the S&P stock index under which party takes the role in the government,
e.g.Â the party of the `president`. The missing NA value of `close` and
`unemployment` is because is the start point of the `pols_month_df` is
1947, but `snp_df` starts at 1950 and `unemployment_df` starts at 1948.
