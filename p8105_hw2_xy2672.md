p8105_hw2_xy2672
================
Xirui Yang
2025-10-02

## Problem 1

Read the `pols_month` datafile and clean:

``` r
pols_month_df = 
  read_csv("data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) |> 
  mutate(
    month = month.name[as.numeric(month)],
    president = 
      case_match(
        prez_gop,
        1 ~ "gop",
        0 ~ "dem"
      ),
    president = as.factor(president)
  ) |> 
  select(-prez_gop, -prez_dem, -day)
```

The `pols_month_df` dataset contains the number of senators, governors
and representatives on a specific `year-month` date. The `president`
variable of this dataset indicates whether the president was Republican
or Democratic. There are 822 observations and 9 variables. The range of
the `year` variable is (1947, 2015).

Read the `snp` datafile and clean:

``` r
snp_df = 
  read_csv("data/snp.csv") |> 
  janitor::clean_names() |> 
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) |> 
  mutate(
    year = if_else(year <= 15, 2000 + year, 1900 + year), # the year range is between 1950 to 2015
    month = month.name[as.numeric(month)]) |> 
  arrange(year, month) |> 
  relocate(year, month) |> 
  select(-day)
```

The `snp_df` dataset contains closing values of the S&P stock index on a
specific `year-month` date. The `close` variable indicates the closing
value. There are 787 observations and 3 variables. The range of the
`year` variable is (1950, 2015).

Read the `unemployment` datafile and tidy it:

``` r
unemployment_df = 
  read_csv("data/unemployment.csv") |>
  pivot_longer(
    cols = -Year,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    Year = as.numeric(Year),
    month = factor(month, levels = month.abb, labels = month.name) # convert abbreviations to full name
  ) |> 
  janitor::clean_names()
```

The `unemployment_df` dataset contains the percentage of unemployment on
a specific `year-month` date. The `unemployment` variable indicates the
percentage of unemployment. There are 816 observations and 3 variables.
The range of the `year` variable is (1948, 2015).

Now joining the dataframe:

``` r
pols_snp_unemployment = pols_month_df |> 
  left_join(snp_df, by = c("year", "month")) |> 
  left_join(unemployment_df, by = c("year", "month"))
```

The `pols_snp_unemployment` dataset merge the three datasets above:
`pols_month_df`, `snp_df`, `unemployment_df`. The dataset range of the
`year` variable remains to be (1947, 2015). This dataset gives
information about the unemployment percentage and the closing values of
the S&P stock index under which party takes the role in the government,
e.g. the party of the `president`. The missing NA value of `close` and
`unemployment` is because is the start point of the `pols_month_df` is
1947, but `snp_df` starts at 1950 and `unemployment_df` starts at 1948.

## Problem 2

Read and clean the Mr.Trash Wheel sheet:

``` r
Mr_Trash_df = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1, range = cell_cols("A:N")) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(
    year = as.numeric(year),
    sports_balls = as.integer(round(sports_balls)),
    wheel = "Mr."
  )
```

Read and clean the Professor Trash Wheel sheet:

``` r
Prof_Trash_df = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1, range = cell_cols("A:M")) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(
    year = as.numeric(year),
    wheel = "Prof"
  )
```

Read and clean the Gwynnda Trash Wheel sheet:

``` r
Gwynnda_Trash_df = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Gwynns Falls Trash Wheel", skip = 1, range = cell_cols("A:L")) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(
    year = as.numeric(year),
    wheel = "Gwynnda"
  )
```

Now combine the three Trash Wheel dataset:

``` r
All_Trash_Wheel_df = 
  bind_rows(Mr_Trash_df, Prof_Trash_df, Gwynnda_Trash_df) |> 
  relocate(wheel)
```

The combined dataset include the three different trash wheels collection
data, which is indicated by the `wheel` variable. There are a total of
1188 observations, with 15 variables. The `sports_balls` variable
contains some NA value because `Prof_Trash_df` and `Gwynnda_Trash_df` do
not contain `sports_balls` data. Same applied for `Glass Bottles`
because `Gwynnda_Trash_df` do not include this variable.

Calculating the total weight of trash collected by Professor Trash
Wheel:

``` r
Prof_Total_weight = 
  All_Trash_Wheel_df |> 
  filter(wheel == "Prof") |> 
  pull(weight_tons) |> 
  sum(na.rm = TRUE)
```

The total weight of trash collected by Professor Trash Wheel is 282.26
tons.

Calculating the total number of cigarette butts collected by Gwynnda in
June of 2022:

``` r
Gwynnda_total_cigarette_june2022 = 
  All_Trash_Wheel_df |> 
  filter(wheel == "Gwynnda", year == 2022, month == "June") |> 
  pull(cigarette_butts) |> 
  sum(na.rm = TRUE)
```

The total number of cigarette butts collected by Gwynnda in June of 2022
is 18120.

## Problem 3

Read the Zip code file and clean it:

``` r
zipcode_df = 
  read_csv("data/Zip Codes.csv") |> 
  janitor::clean_names() |> 
  select(county, zip_code, neighborhood)
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Read the Zip_zori file and clean it:

``` r
Zori_df = 
  read_csv("data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") |> 
  janitor::clean_names() |> 
  rename(zip_code = region_name, county = county_name) |> 
  mutate(
    county = str_remove(county, " County")
  ) |> 
  select(-state_name, -region_type)
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Join the dataset together:

``` r
Zori_zipcode_df = Zori_df |> 
  left_join(zipcode_df, by = c("county", "zip_code")) |> 
  relocate(zip_code, state, city, county)
```

The dataset has 149 observations. There are 149 unique zipcodes
included. There are5 unique counties included.
